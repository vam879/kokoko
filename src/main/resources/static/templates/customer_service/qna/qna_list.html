<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/qna.css">

    <style>
        /* 페이지네이션 */
        /* 게시판 아래버튼 부분 */
        .prev-page{
            border: none;
            margin-right: 15px;
            width: 50px;
            height: 30px;
            cursor: pointer;
        }
        .next-page{
            border: none;
            margin-left: 15px;
            width: 50px;
            height: 30px;
            margin-right:3px;
            cursor: pointer;
        }
        
        /* 게시판 아래버튼 부분 끝 */
    </style>
</head>
<body>
<!--헤더푸터 연결-->
    <script>
        fetch("../../main/header.html")
          .then(res => res.text())
          .then(data => {
            document.getElementById("header").innerHTML = data;

            // header.html 안의 스크립트 실행 강제
            const scripts = document.getElementById("header").querySelectorAll("script");
            scripts.forEach(oldScript => {
            const newScript = document.createElement("script");
            if (oldScript.src) {
                newScript.src = oldScript.src;
            } else {
                newScript.textContent = oldScript.textContent;
            }
            document.body.appendChild(newScript);
            });
          });

       
        fetch("../../main/footer.html")
          .then(res => res.text())
          .then(data => {
            document.getElementById("footer").innerHTML = data;
          });
    </script>
    <div id="header"></div>

    <div id="content" class="cs_qna_list_wrap">
        <h1>ASK NICHIYA</h1>
        <div class="cs_sub_nav">
            <ul>
                <li class="on"><a href="#">회원</a></li>
                <li><a href="#">쿠폰/이벤트</a></li>
                <li><a href="#">주문/결제</a></li>
                <li><a href="#">배송</a></li>
                <li><a href="#">취소/반품/교환</a></li>
                <li><a href="#">여행/숙박/항공</a></li>
                <li><a href="#">안전거래</a></li>
            </ul>
        </div>
        <div class="qna_list_area">
            <div class="qna_section">
                <h2>회원</h2>
                <table>
                    <colgroup>
                        <col style="width: 10%;">   <!-- 유형 -->
                        <col style="width: auto;">  <!-- 제목 -->
                        <col style="width: 15%;">   <!-- 상태 -->
                        <col style="width: 15%;">   <!-- 작성자 -->
                        <col style="width: 15%;">   <!-- 작성일 -->
                    </colgroup>
                    <thead>
                        <tr>
                            <th>유형</th>
                            <th>제목</th>
                            <th>상태</th>
                            <th>작성자</th>
                            <th>작성일</th>
                        </tr>
                    </thead>
                    <script>
                    // ★ 원본 작성자 아이디(예: 서버에서 받아온 값)
                        const AUTHOR_ID = "chkha";

                        // ★ 마스킹 규칙: 앞 3글자 + '**'
                        function maskId(id) {
                          if (!id) return "";
                          return id.length <= 3 ? id : id.slice(0, 3) + "**";
                        }

                        const qnaData = {
                          "회원": [
                            { type: "[가입]", title: "가입 문의내용", status: "검토 중", date: "22.10.31", author: AUTHOR_ID },
                            { type: "[탈퇴]", title: "탈퇴 문의내용", status: "검토 중", date: "22.10.31", author: AUTHOR_ID },
                            { type: "[회원정보]", title: "회원정보 문의내용", status: "답변완료", date: "22.10.31", author: AUTHOR_ID },
                          ],
                          "쿠폰/이벤트": [
                            { type: "[쿠폰]", title: "쿠폰 사용 문의", status: "검토 중", date: "22.11.01", author: AUTHOR_ID },
                            { type: "[이벤트]", title: "이벤트 응모 문의", status: "답변완료", date: "22.11.02", author: AUTHOR_ID },
                          ],
                          "주문/결제": [
                            { type: "[결제]", title: "결제 오류 발생", status: "검토 중", date: "22.11.03", author: AUTHOR_ID },
                            { type: "[주문]", title: "주문 내역 문의", status: "답변완료", date: "22.11.04", author: AUTHOR_ID },
                          ],
                          "배송": [
                            { type: "[배송]", title: "배송 지연 문의", status: "검토 중", date: "22.11.05", author: AUTHOR_ID },
                          ],
                          "취소/반품/교환": [
                            { type: "[반품]", title: "반품 신청 방법", status: "검토 중", date: "22.11.06", author: AUTHOR_ID },
                          ],
                          "여행/숙박/항공": [
                            { type: "[숙박]", title: "숙박 예약 취소", status: "답변완료", date: "22.11.07", author: AUTHOR_ID },
                          ],
                          "안전거래": [
                            { type: "[보안]", title: "보안 관련 문의", status: "검토 중", date: "22.11.08", author: AUTHOR_ID },
                          ]
                        };

                        function renderQnA(category) {
                          const qnaList = qnaData[category] || [];
                          const tableBody = document.querySelector(".qna_section tbody");
                          const sectionTitle = document.querySelector(".qna_section h2");

                          // 테이블 내용 초기화
                          tableBody.innerHTML = "";
                          sectionTitle.textContent = category;

                          // 항목 채우기 (thead와 td 순서 일치: 유형 | 제목 | 상태 | 작성자 | 작성일)
                          qnaList.forEach(qna => {
                            const tr = document.createElement("tr");
                            const masked = maskId(qna.author);
                            tr.innerHTML = `
                              <td>${qna.type}</td>
                              <td><a href="qna_view.html">${qna.title}</a></td>
                              <td class="${qna.status === '답변완료' ? 'status_complete' : 'status_pending'}">${qna.status}</td>
                              <td>${masked}</td>
                              <td>${qna.date}</td>
                            `;
                            tableBody.appendChild(tr);
                          });
                        }

                        // 메뉴 클릭 이벤트 등록
                        document.addEventListener("DOMContentLoaded", () => {
                          const menuItems = document.querySelectorAll(".cs_sub_nav li");

                          menuItems.forEach(item => {
                            item.addEventListener("click", e => {
                              e.preventDefault();

                              // 선택된 카테고리 이름
                              const category = item.textContent.trim();

                              // 메뉴 on 클래스 처리
                              menuItems.forEach(i => i.classList.remove("on"));
                              item.classList.add("on");

                              // Q&A 목록 렌더링
                              renderQnA(category);
                            });
                          });

                          // 초기 로딩 시 "회원" 항목 표시
                          renderQnA("회원");
                        });
                    </script>

                    <tbody>
                        <!-- JavaScript가 동적으로 채움 -->
                    </tbody>
                </table>
            </div>
            <!-- 페이지네이션 -->
            <div style=" height: 100px; margin-top:40px; display: flex; justify-content: center;">
                <form action="" method="" style="">
                    <div style="display: flex;">
                        <div style="">
                            <input type="button" class="prev-page" value="< 이전" style="border:1px solid #ddd;">
                        </div>
                        <div style="">
                            <input type="button" value="1" style="border:1px solid #333; background-color: #333; color: white; height: 30px; width: 30px; margin-right:2px; line-height:1;">
                            <input type="button" value="2" style="cursor: pointer; border:1px solid #ddd; color: #555; height: 30px; width: 30px; margin-right:2px; line-height:1;">
                            <input type="button" value="3" style="cursor: pointer; border:1px solid #ddd; color: #555; height: 30px; width: 30px; line-height:1;">
                        </div>
                        <div>
                            <input type="button" class="next-page" value="다음 >" style="border:1px solid #ddd;">
                        </div>
                    </div>
                </form>
                
            </div>
            <div class="btn_area">
                <a href="qna_write.html" class="btn_write">문의하기</a>
            </div>
        </div>
    </div>
<div id="footer"></div>    
</body>
</html>