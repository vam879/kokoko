<!-- 추후다른 기능이나 페이지 구현이 필요할까봐 그냥 남겨놓습니다. -->

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>FAQ 상세 보기</title>
  <link rel="stylesheet" href="../css/common.css" />
  <link rel="stylesheet" href="../css/faq.css" />
</head>
<body>
  <div id="header"></div>

  <div class="cs_faq_list_wrap">
    <h1 id="category-title">FAQ</h1>

    <!-- 카테고리 상단바 -->
    <div class="cs_sub_nav">
      <ul id="category-nav">
        <li><a href="faq_view.html?category=회원">회원</a></li>
        <li><a href="faq_view.html?category=쿠폰/이벤트">쿠폰/이벤트</a></li>
        <li><a href="faq_view.html?category=주문/결제">주문/결제</a></li>
        <li><a href="faq_view.html?category=배송">배송</a></li>
        <li><a href="faq_view.html?category=취소/반품/교환">취소/반품/교환</a></li>
        <li><a href="faq_view.html?category=여행/숙박/항공">여행/숙박/항공</a></li>
        <li><a href="faq_view.html?category=안전거래">안전거래</a></li>
      </ul>
    </div>

    <div id="faq-container" class="faq_list_area"></div>

    <div class="btn_area">
      <button class="btn_more" id="more-btn">더보기</button>
    </div>
  </div>

  <div id="footer"></div>

  

  <script>
    // 헤더/푸터 로드
    fetch("../../main/header.html")
      .then(res => res.text())
      .then(data => {
        document.getElementById("header").innerHTML = data;
      });
    fetch("../../main/footer.html")
      .then(res => res.text())
      .then(data => {
        document.getElementById("footer").innerHTML = data;
      });

    // URL에서 category 파라미터 읽는 함수 (없으면 '회원' 기본)
    function getCurrentCategory() {
      const params = new URLSearchParams(window.location.search);
      return params.get("category") || "회원";
    }

    const faqData = {
      "회원": [
        { q: "개인회원과 법인회원 차이가 있나요?", a: "개인회원은 일반 개인 사용자이며, 법인회원은 사업자 등록증이 있는 사용자입니다." },
        { q: "회원 탈퇴 후 재가입이 가능한가요?", a: "회원 탈퇴 후 30일 이내에는 재가입이 제한됩니다." },
        { q: "비밀번호를 잊었어요.", a: "비밀번호 찾기 기능을 이용해 주세요." }
      ],
      "쿠폰/이벤트": [
        { q: "쿠폰은 어디서 확인하나요?", a: "마이페이지 > 쿠폰함에서 확인 가능합니다." },
        { q: "이벤트 당첨 결과는 어디서 보나요?", a: "공지사항 또는 개별 문자로 안내드립니다." }
      ],
      "주문/결제": [
        { q: "주문 내역은 어디서 확인하나요?", a: "마이페이지 > 주문내역에서 확인할 수 있습니다." },
        { q: "결제수단은 어떤 것이 있나요?", a: "신용카드, 계좌이체, 휴대폰 결제 등이 있습니다." }
      ],
      "배송": [
        { q: "배송 조회는 어떻게 하나요?", a: "마이페이지 > 주문내역 > 배송조회에서 확인 가능합니다." },
        { q: "배송비는 얼마인가요?", a: "3만원 이상 구매 시 무료배송입니다." }
      ],
      "취소/반품/교환": [
        { q: "주문 취소는 어떻게 하나요?", a: "상품 준비 중 상태일 때만 직접 취소 가능합니다." },
        { q: "교환은 어떻게 하나요?", a: "고객센터를 통해 신청해 주세요." }
      ],
      "여행/숙박/항공": [
        { q: "예약 후 변경 가능한가요?", a: "상품에 따라 변경 가능 여부가 다르니 상세정보를 확인하세요." },
        { q: "여권 정보 입력은 필수인가요?", a: "항공권 예약 시 필수입니다." }
      ],
      "안전거래": [
        { q: "안전거래란 무엇인가요?", a: "구매자와 판매자 간 안전한 결제를 보장하는 서비스입니다." },
        { q: "에스크로 서비스는 어떻게 이용하나요?", a: "자동으로 적용되며 별도 설정은 필요 없습니다." }
      ]
    };

    // DOM 참조
    const category = getCurrentCategory();
    const container = document.getElementById("faq-container");
    const title = document.getElementById("category-title");
    const moreBtn = document.getElementById("more-btn");
    const navList = document.getElementById("category-nav").querySelectorAll("li");

    // 카테고리 제목 설정
    title.innerText = `${category} FAQ`;

    // 현재 카테고리 탭에 'on' 클래스 주기
    navList.forEach(li => {
      const a = li.querySelector("a");
      if (a.getAttribute("href").includes(`category=${category}`)) {
        li.classList.add("on");
      } else {
        li.classList.remove("on");
      }
    });

    let shownCount = 0;
    const showPerPage = 2;
    const dataList = faqData[category] || [];

    function renderFAQ() {
      const fragment = document.createDocumentFragment();

      for (let i = shownCount; i < Math.min(shownCount + showPerPage, dataList.length); i++) {
        const item = dataList[i];

        const faqItem = document.createElement("div");
        faqItem.className = "faq_item";

        const question = document.createElement("button");
        question.className = "faq_q";
        question.textContent = item.q;
        question.onclick = () => {
          faqItem.classList.toggle("open");
        };

        const answer = document.createElement("div");
        answer.className = "faq_a";
        answer.innerHTML = `<p>${item.a}</p>`;

        faqItem.appendChild(question);
        faqItem.appendChild(answer);
        fragment.appendChild(faqItem);
      }

      container.appendChild(fragment);
      shownCount += showPerPage;

      if (shownCount >= dataList.length) {
        moreBtn.style.display = "none";
      }
    }

    moreBtn.addEventListener("click", renderFAQ);

    // 초기 렌더링
    renderFAQ();
  </script>
</body>
</html>
