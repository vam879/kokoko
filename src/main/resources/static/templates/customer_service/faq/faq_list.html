<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>자주하는 질문 (FAQ)</title>
  <link rel="stylesheet" href="../css/common.css" />
  <link rel="stylesheet" href="../css/faq2.css" />
</head>
<body>
<!-- 헤더/푸터 영역 -->
    <script>
        fetch("../../main/header.html")
          .then(res => res.text())
          .then(data => {
            document.getElementById("header").innerHTML = data;

            // header script 강제 실행
            const scripts = document.getElementById("header").querySelectorAll("script");
            scripts.forEach(oldScript => {
              const newScript = document.createElement("script");
              if (oldScript.src) newScript.src = oldScript.src;
              else newScript.textContent = oldScript.textContent;
              document.body.appendChild(newScript);
            });
          });

        fetch("../../main/footer.html")
          .then(res => res.text())
          .then(data => {
            document.getElementById("footer").innerHTML = data;
          });
    </script>

    <div id="header"></div>


  <div class="cs_faq_list_wrap">
    <h1>FAQ</h1>

    <!-- 카테고리 네비 -->
    <div class="cs_sub_nav">
      <ul id="category-nav">
        <li><a href="#" data-category="회원">회원</a></li>
        <li><a href="#" data-category="쿠폰/이벤트">쿠폰/이벤트</a></li>
        <li><a href="#" data-category="주문/결제">주문/결제</a></li>
        <li><a href="#" data-category="배송">배송</a></li>
        <li><a href="#" data-category="취소/반품/교환">취소/반품/교환</a></li>
        <li><a href="#" data-category="여행/숙박/항공">여행/숙박/항공</a></li>
        <li><a href="#" data-category="안전거래">안전거래</a></li>
      </ul>
    </div>

    <h2 id="category-title">회원 FAQ</h2>

    <!-- FAQ 목록 -->
    <div class="faq_list_area" id="faq-container"></div>

    <!-- 더보기 버튼 -->
    <div class="btn_area">
      <button class="btn_more" id="btn-more" style="border-radius: 0 !important; height:45px;">더보기</button>
      <button class="btn_less" id="btn-less" style="display:none; height:45px; border-radius: 0; padding:10px 20px; font-size: 14px; border:1px solid #ccc; background-color: #eee; color:#333; cursor:pointer;">간단히보기</button>
    </div>
  </div>

  

  <div id="footer" style="margin-top:150px;"></div>


<!-- view 기능을 list에서 같이 구현 -->
  <script>
    // FAQ 데이터
    const faqData = {
      "회원": [
        { q: "개인회원과 법인회원 차이가 있나요?", a: "개인회원은 일반 사용자이며, 법인회원은 사업자 등록이 필요합니다." },
        { q: "회원 탈퇴 후 재가입이 가능한가요?", a: "탈퇴 후 30일간은 재가입이 제한됩니다." },
        { q: "비밀번호를 잊었어요.", a: "로그인 페이지의 비밀번호 찾기를 이용해 주세요." },
        { q: "개인회원과 법인회원 차이가 있나요?", a: "개인회원은 일반 사용자이며, 법인회원은 사업자 등록이 필요합니다." },
        { q: "회원 탈퇴 후 재가입이 가능한가요?", a: "탈퇴 후 30일간은 재가입이 제한됩니다." },
        { q: "비밀번호를 잊었어요.", a: "로그인 페이지의 비밀번호 찾기를 이용해 주세요." },
        { q: "개인회원과 법인회원 차이가 있나요?", a: "개인회원은 일반 사용자이며, 법인회원은 사업자 등록이 필요합니다." },
        { q: "회원 탈퇴 후 재가입이 가능한가요?", a: "탈퇴 후 30일간은 재가입이 제한됩니다." },
        { q: "비밀번호를 잊었어요.", a: "로그인 페이지의 비밀번호 찾기를 이용해 주세요." },
        { q: "개인회원과 법인회원 차이가 있나요?", a: "개인회원은 일반 사용자이며, 법인회원은 사업자 등록이 필요합니다." },
        { q: "회원 탈퇴 후 재가입이 가능한가요?", a: "탈퇴 후 30일간은 재가입이 제한됩니다." },
        { q: "비밀번호를 잊었어요.", a: "로그인 페이지의 비밀번호 찾기를 이용해 주세요." }
      ],
      "쿠폰/이벤트": [
        { q: "쿠폰은 어디서 확인하나요?", a: "마이페이지 > 쿠폰함에서 확인 가능합니다." },
        { q: "이벤트 당첨 결과는 어디서 보나요?", a: "공지사항 또는 개별 문자로 안내드립니다." },
        { q: "쿠폰은 어디서 확인하나요?", a: "마이페이지 > 쿠폰함에서 확인 가능합니다." },
        { q: "이벤트 당첨 결과는 어디서 보나요?", a: "공지사항 또는 개별 문자로 안내드립니다." },
        { q: "쿠폰은 어디서 확인하나요?", a: "마이페이지 > 쿠폰함에서 확인 가능합니다." },
        { q: "이벤트 당첨 결과는 어디서 보나요?", a: "공지사항 또는 개별 문자로 안내드립니다." },
        { q: "쿠폰은 어디서 확인하나요?", a: "마이페이지 > 쿠폰함에서 확인 가능합니다." },
        { q: "이벤트 당첨 결과는 어디서 보나요?", a: "공지사항 또는 개별 문자로 안내드립니다." },
        { q: "쿠폰은 어디서 확인하나요?", a: "마이페이지 > 쿠폰함에서 확인 가능합니다." },
        { q: "이벤트 당첨 결과는 어디서 보나요?", a: "공지사항 또는 개별 문자로 안내드립니다." },
        { q: "쿠폰은 어디서 확인하나요?", a: "마이페이지 > 쿠폰함에서 확인 가능합니다." },
        { q: "이벤트 당첨 결과는 어디서 보나요?", a: "공지사항 또는 개별 문자로 안내드립니다." }
      ],
      "주문/결제": [
        { q: "주문 내역은 어디서 확인하나요?", a: "마이페이지 > 주문내역에서 확인할 수 있습니다." },
        { q: "결제수단은 어떤 것이 있나요?", a: "신용카드, 계좌이체, 휴대폰 결제 등이 있습니다." },
        { q: "주문 내역은 어디서 확인하나요?", a: "마이페이지 > 주문내역에서 확인할 수 있습니다." },
        { q: "결제수단은 어떤 것이 있나요?", a: "신용카드, 계좌이체, 휴대폰 결제 등이 있습니다." },
        { q: "주문 내역은 어디서 확인하나요?", a: "마이페이지 > 주문내역에서 확인할 수 있습니다." },
        { q: "결제수단은 어떤 것이 있나요?", a: "신용카드, 계좌이체, 휴대폰 결제 등이 있습니다." },
        { q: "주문 내역은 어디서 확인하나요?", a: "마이페이지 > 주문내역에서 확인할 수 있습니다." },
        { q: "결제수단은 어떤 것이 있나요?", a: "신용카드, 계좌이체, 휴대폰 결제 등이 있습니다." },
        { q: "주문 내역은 어디서 확인하나요?", a: "마이페이지 > 주문내역에서 확인할 수 있습니다." },
        { q: "결제수단은 어떤 것이 있나요?", a: "신용카드, 계좌이체, 휴대폰 결제 등이 있습니다." },
        { q: "주문 내역은 어디서 확인하나요?", a: "마이페이지 > 주문내역에서 확인할 수 있습니다." },
        { q: "결제수단은 어떤 것이 있나요?", a: "신용카드, 계좌이체, 휴대폰 결제 등이 있습니다." }
      ],
      "배송": [
        { q: "배송 조회는 어떻게 하나요?", a: "마이페이지 > 주문내역 > 배송조회에서 확인 가능합니다." },
        { q: "배송비는 얼마인가요?", a: "3만원 이상 구매 시 무료배송입니다." },
        { q: "배송 조회는 어떻게 하나요?", a: "마이페이지 > 주문내역 > 배송조회에서 확인 가능합니다." },
        { q: "배송비는 얼마인가요?", a: "3만원 이상 구매 시 무료배송입니다." },
        { q: "배송 조회는 어떻게 하나요?", a: "마이페이지 > 주문내역 > 배송조회에서 확인 가능합니다." },
        { q: "배송비는 얼마인가요?", a: "3만원 이상 구매 시 무료배송입니다." },
        { q: "배송 조회는 어떻게 하나요?", a: "마이페이지 > 주문내역 > 배송조회에서 확인 가능합니다." },
        { q: "배송비는 얼마인가요?", a: "3만원 이상 구매 시 무료배송입니다." },
        { q: "배송 조회는 어떻게 하나요?", a: "마이페이지 > 주문내역 > 배송조회에서 확인 가능합니다." },
        { q: "배송비는 얼마인가요?", a: "3만원 이상 구매 시 무료배송입니다." },
        { q: "배송 조회는 어떻게 하나요?", a: "마이페이지 > 주문내역 > 배송조회에서 확인 가능합니다." },
        { q: "배송비는 얼마인가요?", a: "3만원 이상 구매 시 무료배송입니다." },
        { q: "배송 조회는 어떻게 하나요?", a: "마이페이지 > 주문내역 > 배송조회에서 확인 가능합니다." },
        { q: "배송비는 얼마인가요?", a: "3만원 이상 구매 시 무료배송입니다." }
      ],
      "취소/반품/교환": [
        { q: "주문 취소는 어떻게 하나요?", a: "상품 준비 중 상태일 때만 직접 취소 가능합니다." },
        { q: "교환은 어떻게 하나요?", a: "고객센터를 통해 신청해 주세요." },
        { q: "주문 취소는 어떻게 하나요?", a: "상품 준비 중 상태일 때만 직접 취소 가능합니다." },
        { q: "교환은 어떻게 하나요?", a: "고객센터를 통해 신청해 주세요." },
        { q: "주문 취소는 어떻게 하나요?", a: "상품 준비 중 상태일 때만 직접 취소 가능합니다." },
        { q: "교환은 어떻게 하나요?", a: "고객센터를 통해 신청해 주세요." },
        { q: "주문 취소는 어떻게 하나요?", a: "상품 준비 중 상태일 때만 직접 취소 가능합니다." },
        { q: "교환은 어떻게 하나요?", a: "고객센터를 통해 신청해 주세요." },
        { q: "주문 취소는 어떻게 하나요?", a: "상품 준비 중 상태일 때만 직접 취소 가능합니다." },
        { q: "교환은 어떻게 하나요?", a: "고객센터를 통해 신청해 주세요." },
        { q: "주문 취소는 어떻게 하나요?", a: "상품 준비 중 상태일 때만 직접 취소 가능합니다." },
        { q: "교환은 어떻게 하나요?", a: "고객센터를 통해 신청해 주세요." }
      ],
      "여행/숙박/항공": [
        { q: "예약 후 변경 가능한가요?", a: "상품에 따라 변경 가능 여부가 다르니 상세정보를 확인하세요." },
        { q: "여권 정보 입력은 필수인가요?", a: "항공권 예약 시 필수입니다." },
        { q: "예약 후 변경 가능한가요?", a: "상품에 따라 변경 가능 여부가 다르니 상세정보를 확인하세요." },
        { q: "여권 정보 입력은 필수인가요?", a: "항공권 예약 시 필수입니다." },
        { q: "예약 후 변경 가능한가요?", a: "상품에 따라 변경 가능 여부가 다르니 상세정보를 확인하세요." },
        { q: "여권 정보 입력은 필수인가요?", a: "항공권 예약 시 필수입니다." },
        { q: "예약 후 변경 가능한가요?", a: "상품에 따라 변경 가능 여부가 다르니 상세정보를 확인하세요." },
        { q: "여권 정보 입력은 필수인가요?", a: "항공권 예약 시 필수입니다." },
        { q: "예약 후 변경 가능한가요?", a: "상품에 따라 변경 가능 여부가 다르니 상세정보를 확인하세요." },
        { q: "여권 정보 입력은 필수인가요?", a: "항공권 예약 시 필수입니다." }
      ],
      "안전거래": [
        { q: "안전거래란 무엇인가요?", a: "구매자와 판매자 간 안전한 결제를 보장하는 서비스입니다." },
        { q: "에스크로 서비스는 어떻게 이용하나요?", a: "자동으로 적용되며 별도 설정은 필요 없습니다." },
        { q: "안전거래란 무엇인가요?", a: "구매자와 판매자 간 안전한 결제를 보장하는 서비스입니다." },
        { q: "에스크로 서비스는 어떻게 이용하나요?", a: "자동으로 적용되며 별도 설정은 필요 없습니다." },
        { q: "안전거래란 무엇인가요?", a: "구매자와 판매자 간 안전한 결제를 보장하는 서비스입니다." },
        { q: "에스크로 서비스는 어떻게 이용하나요?", a: "자동으로 적용되며 별도 설정은 필요 없습니다." },
        { q: "안전거래란 무엇인가요?", a: "구매자와 판매자 간 안전한 결제를 보장하는 서비스입니다." },
        { q: "에스크로 서비스는 어떻게 이용하나요?", a: "자동으로 적용되며 별도 설정은 필요 없습니다." },
        { q: "안전거래란 무엇인가요?", a: "구매자와 판매자 간 안전한 결제를 보장하는 서비스입니다." },
        { q: "에스크로 서비스는 어떻게 이용하나요?", a: "자동으로 적용되며 별도 설정은 필요 없습니다." },
        { q: "안전거래란 무엇인가요?", a: "구매자와 판매자 간 안전한 결제를 보장하는 서비스입니다." },
        { q: "에스크로 서비스는 어떻게 이용하나요?", a: "자동으로 적용되며 별도 설정은 필요 없습니다." },
        { q: "안전거래란 무엇인가요?", a: "구매자와 판매자 간 안전한 결제를 보장하는 서비스입니다." },
        { q: "에스크로 서비스는 어떻게 이용하나요?", a: "자동으로 적용되며 별도 설정은 필요 없습니다." }
      ]
    };

    let currentCategory = "회원";
    let shownCountMap = {}; // 카테고리별 shownCount 저장
    const MIN_SHOW = 3;    // 최초/간단히보기 시 보여줄 개수
  const STEP_SHOW = 3;   // 더보기 클릭 시 늘어나는 개수
  const MAX_SHOW = 10;   // 한 카테고리 최대 보여줄 개수

  const faqContainer = document.getElementById("faq-container");
  const moreBtn = document.getElementById("btn-more");
  const lessBtn = document.getElementById("btn-less");
  const titleEl = document.getElementById("category-title");
  const navLinks = document.querySelectorAll("#category-nav a");

  function getCap(list) {
    // 현재 카테고리에서 보여줄 수 있는 최대치(데이터 수와 10 중 작은 값)
    return Math.min(MAX_SHOW, list.length);
  }

  function renderFAQs(reset = false) {
    const list = faqData[currentCategory] || [];

    // 카운트 초기화(카테고리 전환 등)
    if (reset || shownCountMap[currentCategory] == null) {
      shownCountMap[currentCategory] = Math.min(MIN_SHOW, list.length);
    }

    const cap = getCap(list);
    let toShow = Math.min(shownCountMap[currentCategory], cap);

    // 화면 재빌드
    faqContainer.innerHTML = "";
    const fragment = document.createDocumentFragment();

    for (let i = 0; i < toShow; i++) {
      const item = list[i];

      const div = document.createElement("div");
      div.className = "faq_item";

      const btn = document.createElement("button");
      btn.className = "faq_q";
      btn.textContent = item.q;
      btn.onclick = () => div.classList.toggle("open");

      const answer = document.createElement("div");
      answer.className = "faq_a";
      answer.innerHTML = `<p>${item.a}</p>`;

      div.appendChild(btn);
      div.appendChild(answer);
      fragment.appendChild(div);
    }
    faqContainer.appendChild(fragment);

    // 버튼 표시/비표시 제어
    // 더보기: cap(최대 노출 가능치)보다 덜 보여주고 있을 때만 표시
    if (toShow < cap && list.length > MIN_SHOW) {
      moreBtn.style.display = "inline-block";
    } else {
      moreBtn.style.display = "none";
    }

    // 간단히보기: 10개(또는 cap)까지 다 펼친 경우에만 표시
    if (toShow >= cap && toShow > MIN_SHOW) {
      lessBtn.style.display = "inline-block";
    } else {
      lessBtn.style.display = "none";
    }
  }

  // 더보기: 3개씩 증가(최대 10개까지)
  moreBtn.addEventListener("click", () => {
    const list = faqData[currentCategory] || [];
    const cap = getCap(list);
    shownCountMap[currentCategory] = Math.min(
      (shownCountMap[currentCategory] || MIN_SHOW) + STEP_SHOW,
      cap
    );
    renderFAQs();
  });

  // 간단히보기: 다시 3개로 축소
  lessBtn.addEventListener("click", () => {
    const list = faqData[currentCategory] || [];
    shownCountMap[currentCategory] = Math.min(MIN_SHOW, list.length);
    renderFAQs();
  });

  // 카테고리 클릭
  navLinks.forEach(link => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      currentCategory = link.getAttribute("data-category");
      titleEl.innerText = `${currentCategory} FAQ`;
      navLinks.forEach(a => a.parentElement.classList.remove("on"));
      link.parentElement.classList.add("on");
      renderFAQs(true); // 카테고리 전환 시 3개부터
    });
  });

  // 초기 로딩
  renderFAQs(true);
  document.querySelector(`[data-category="${currentCategory}"]`).parentElement.classList.add("on");
  </script>
</body>
</html>
